@using SamProject.Models

@model Application


<script>

    function chartMouseClick(obj)
    {
        console.log(obj.target);
    }

</script>



@{
    var lines = new
    {
        width = 0.0001
    };

    var border = new Syncfusion.EJ2.Charts.ChartBorder
    {
        Width = 0,
        Color = "transparent"
    };

    var location = new
    {
        x = 300,
        y = 300
    };
}



<ejs-chart id="splineContainer"
           load="window.onChartLoad"
           chartMouseClick="chartMouseClick"
           height="300">

    <e-chart-primaryxaxis majorGridLines="lines"
                          labelIntersectAction="Rotate45"
                          valueType="DateTime"
                          maximum="Model?.BeginDate.AddDays(-1)"
                          minimum="Model?.EndDate.AddDays(1)"
                          edgeLabelPlacement="Shift"
                          intervalType="Days"
                          labelFormat="dd MMM"></e-chart-primaryxaxis>

    <e-chart-primaryyaxis minimum="0"
                          maximum="2"
                          interval="0.25"
                          title="ставка"
                          labelFormat="{value}"
                          majorTickLines="lines"
                          lineStyle="lines"
    
                          enableAutoIntervalOnZooming="true"></e-chart-primaryyaxis>

    <e-chart-axes>
        <e-chart-axis id="lineAxis"
                      name="lineAxis"
                      valueType="Double"
                      majorGridLines="lines"
                      interval="1.0"
                      maximum="(Model?.EndDate.AddDays(1) - Model?.BeginDate)?.Days + 0.5"
                      minimum="-0.5"
                      visible="false"
        
                      enableAutoIntervalOnZooming="true" ></e-chart-axis>
    </e-chart-axes>

    <e-series-collection>

        @foreach (ChartData<DateTime> chartData in ViewBag.ColumnsDataSource)
        {
            <e-series dataSource="chartData.DataSource"
                      columnWidth="0.5"
                      xName="X"
                      yName="Y"
                      name="@(chartData.Name)"
                      width="2"
                      opacity="1"
                      fill="@(chartData.Color)"
                      legendShape="@(Syncfusion.EJ2.Charts.LegendShape.SeriesType)"
                      type="@Syncfusion.EJ2.Charts.ChartSeriesType.StackingColumn">
            </e-series>
        }

        @*@foreach (ChartData chartData in ViewBag.AreaDataSource)
            {
                <e-series dataSource="chartData.DataSource"
                          name="@(chartData.Name)"
                          xName="x"
                          opacity="0.5"
                          width="2"
                          yName="y"
                          type="@Syncfusion.EJ2.Charts.ChartSeriesType.StepArea"
                          fill="@(chartData.Color)"
                          xAxisName="lineAxis">
                    <e-series-border color="transparent"></e-series-border>
                </e-series>
            }*@

        @foreach (ChartData<double> chartData in ViewBag.LineDataSource)
        {
            <e-series dataSource="chartData.DataSource"
                      name="@(chartData.Name)"
                      xName="X"
                      yName="Y"
                      width="2"
                      opacity="1"
                      fill="@(chartData.Color)"
                      type="@Syncfusion.EJ2.Charts.ChartSeriesType.StepLine"
                      xAxisName="lineAxis"
                      enableTooltip="false">
            </e-series>
        }

    </e-series-collection>

    <e-chart-zoomsettings enableMouseWheelZooming="true"
                          enablePinchZooming="true"
                          mode="X"
                          enableScrollbar="true"
                          enablePan="true"></e-chart-zoomsettings>

    <e-chart-margin bottom="10"
                    top="10"
                    left="0"
                    right="0"></e-chart-margin>

    <e-chart-tooltipsettings enable="true"></e-chart-tooltipsettings>

    <e-chart-legendsettings toggleVisibility="true"
                            position="Bottom">
        @*location="location">*@
        @*alignment="Center">*@
    </e-chart-legendsettings>

    <e-chart-chartarea>
        <e-chartarea-border width="0.0001"></e-chartarea-border>
    </e-chart-chartarea>

</ejs-chart>